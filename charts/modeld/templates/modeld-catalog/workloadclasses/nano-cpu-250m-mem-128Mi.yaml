apiVersion: catalog.modeld.io/v1alpha1
kind: WorkloadClass
metadata:
  name: nano-cpu-250m-mem-128mi
  namespace: modeld-catalog
spec:
  dataImage: quay.io/metaprov/modeld-data-plane:latest
  controlImage: quay.io/metaprov/modeld-workload:latest
  trainerImage: quay.io/metaprov/modeld-trainer:latest
  publisherImage: quay.io/metaprov/modeld-publisher:latest
  vcpu: 0.25
  mem:  128Mi
  podTemplate:
      metadata:
        labels:
          app.kubernetes.io/name: modeld-trainer
      spec:
        restartPolicy: Never
        containers:
          - name: control
            ports:
                - containerPort: 8080
            volumeMounts:
                - name: data
                  mountPath: /home/modeld/data
          - name: data
            image: quay.io/metaprov/modeld-data-plane:latest
            imagePullPolicy: IfNotPresent
            ports:
               - containerPort: 8070
                 name: http
               - containerPort: 9090
                 name: metrics
               - containerPort: 8008
                 name: profiling
            resources:
              requests:
                memory: "128Mi"
                cpu: "250m"
              limits:
                memory: "128Mi"
                cpu: "250m"
            volumeMounts:
               - name: data
                 mountPath: /home/modeld/data
          - name: cloud-proxy
            image: quay.io/metaprov/modeld-cloud-proxy:latest
            imagePullPolicy: IfNotPresent
            ports:
              - name: http
                containerPort: 8090
            volumeMounts:
              - name: data
                mountPath: /home/modeld/data
        volumes:
          - name: data
            emptyDir: {}